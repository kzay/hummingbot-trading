# ============================================================================
#  Directional MAX/MIN V1 — Controller Configuration (Bot 1)
# ============================================================================
#  Systematic directional strategy based on Padysak & Vojtko (2022):
#    - BTC at 10-day HIGH → LONG (momentum continuation, Ret/Vol=1.71)
#    - BTC at 10-day LOW  → LONG (mean-reversion bounce, Ret/Vol=0.74)
#    - Combined: 98% annual return, Ret/Vol=2.06
#    - Seasonality: 21:00-23:00 UTC best window (33% annual, 20.9% vol)
#
#  This is a DIRECTIONAL strategy, not market making.
#  It trades 0-3 times per day, holds for hours to days.
# ============================================================================

# ---- Identity ----
controller_name: directional_max_min_v1
controller_type: directional_trading

# ---- Exchange & Market ----
# Using Bitget spot (you have API keys configured)
# For perpetual with leverage, change to bitget_perpetual
connector_name: bitget
trading_pair: BTC-USDT

# ---- Capital ----
# Amount per position (not total capital)
# With $1000 account, $300/position leaves buffer for SL + multiple entries
total_amount_quote: 300

# ---- Leverage ----
# Spot: leverage=1. For perp: set leverage=2-3.
leverage: 1

# ---- Default Triple Barrier (fallback) ----
# These are overridden per signal type by the controller,
# but serve as defaults if custom construction fails.
stop_loss: 0.015                     # 1.5% (momentum default)
take_profit: 0.03                    # 3.0% (momentum default)
time_limit: 172800                   # 48h

# ---- Candle Data (two timeframes) ----
candles_connector: ""                # Empty = same as connector_name
candles_trading_pair: ""             # Empty = same as trading_pair
interval_daily: "1d"                 # Daily candles for MAX/MIN + EMA + ADX
interval_intraday: "1h"             # Hourly candles for NATR + timing

# ---- MAX/MIN Signal Parameters ----
# Paper finding: lookback=10 has best Ret/Vol for both MAX and MIN
lookback_days: 10
# 0.3% proximity: counts as "at MAX/MIN" within 0.3%
# This accounts for intraday noise vs daily close levels
proximity_pct: 0.3
# Momentum signal has higher weight (stronger effect in paper)
max_signal_weight: 1.0
# Bounce signal slightly lower (paper Ret/Vol: 0.74 vs 1.71)
min_signal_weight: 0.8

# ---- Trend Filter (EMA on daily candles) ----
ema_fast_length: 8
ema_slow_length: 21

# ---- Regime Detection (ADX on daily candles) ----
adx_length: 14
adx_trend_threshold: 25.0

# ---- Seasonality (from paper: 21-23 UTC best, 03-04 UTC worst) ----
seasonality_enabled: true
# Boost signal by 30% during best hours
seasonality_boost_factor: 0.3

# ---- Volatility (NATR on hourly candles) ----
natr_length: 14
# Pause entries when hourly NATR > 5% (extreme volatility)
volatility_pause_threshold: 5.0

# ---- Risk: Momentum Entries (at N-day MAX) ----
# Momentum = trend continuation → wider TP, trailing stop, longer hold
# Paper: "At MAX" has Ret/Vol=1.71, Return=60.47%, Vol=35.44%, MDD=-26.54%
momentum_take_profit: 0.03           # 3% — let the trend run
momentum_stop_loss: 0.015            # 1.5% — moderate SL
momentum_time_limit: 172800          # 48h — give momentum time
momentum_trailing_activation: 0.015  # Activate trail at +1.5%
momentum_trailing_delta: 0.005       # Trail by 0.5%

# ---- Risk: Bounce Entries (at N-day MIN) ----
# Bounce = mean-reversion → tighter TP, no trailing, shorter hold
# Paper: "At MIN" has Ret/Vol=0.74, Return=23.68%, Vol=32.10%, MDD=-36.05%
bounce_take_profit: 0.02             # 2% — take profit quickly on bounce
bounce_stop_loss: 0.01               # 1% — tight SL (bounce or fail fast)
bounce_time_limit: 86400             # 24h — bounces are short-lived

# ---- Short Selling (EXPERIMENTAL — NOT in original paper) ----
# Only enable on perpetual connector with leverage
# The paper does not test short signals; this is a logical extension
short_enabled: false
short_adx_min: 30.0                  # Only short in very strong downtrends
