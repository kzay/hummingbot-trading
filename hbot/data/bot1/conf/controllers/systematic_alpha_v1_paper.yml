# ============================================================================
#  Systematic Alpha V1 — Multi-Factor Quant Strategy Configuration
# ============================================================================
#  A professional quantitative directional strategy combining 5 orthogonal
#  signal factors, regime-dependent weighting, ATR-based adaptive stops,
#  and target-volatility position sizing.
#
#  This is NOT a simple indicator strategy. It's a multi-factor composite
#  where each factor is weighted by the detected market regime.
#
#  Factor Architecture:
#    F1 BREAKOUT  : 10-day MAX/MIN + volume confirmation
#    F2 TREND     : Triple-EMA alignment (8/21/50) + slope
#    F3 REVERSION : Bollinger %B + RSI(14) + return z-score
#    F4 VOLUME    : Relative volume + OBV direction
#    F5 SEASON    : 21-23 UTC hour boost (academically documented)
#
#  Risk Management:
#    - ATR-based dynamic SL/TP (adapts to volatility — not fixed %)
#    - Target-vol sizing (bigger in low vol, smaller in high vol)
#    - Trailing stop on momentum signals
#    - Volatility pause above threshold
#    - Global drawdown kill switch
# ============================================================================

# ---- Identity ----
controller_name: systematic_alpha_v1
controller_type: directional_trading

# ---- Exchange & Market ----
# Paper trade: uses real price feed, simulated fills
# Enabled by adding "bitget_perpetual" to paper_trade_exchanges in conf_client.yml
connector_name: bitget_perpetual_paper_trade
trading_pair: SOL-USDT

# ---- Capital ----
# Base amount per position — actual size scaled by vol_scalar × signal strength
# $300 base → effective $90-$600 depending on volatility and conviction
total_amount_quote: 10

# ---- Leverage ----
leverage: 1 # Spot: 1x. Set 2-3x for perpetual.

# ---- Default Triple Barrier (fallback if custom fails) ----
stop_loss: 0.02
take_profit: 0.04
time_limit: 172800

# ---- Candle Data ----
candles_connector: ""
candles_trading_pair: ""
interval_daily: "1d" # MAX/MIN, EMA, ADX, ATR, volume
interval_4h: "4h" # RSI, Bollinger Bands, NATR

# ════════════════════════════════════════════════════════════════
#  FACTOR PARAMETERS
# ════════════════════════════════════════════════════════════════

# ---- F1: Breakout ----
lookback_days: 10 # Paper's best lookback (Padysak & Vojtko)
proximity_pct: 0.3 # Within 0.3% counts as "at" extreme

# ---- F2: Trend ----
ema_fast: 8
ema_mid: 21
ema_slow: 50 # 50-day EMA for major trend

# ---- F3: Reversion ----
rsi_length: 14
bb_length: 20
bb_std: 2.0
zscore_return_days: 5 # 5-day return for z-score
zscore_std_days: 20 # 20-day std for normalization

# ---- F4: Volume ----
vol_avg_length: 20 # 20-day volume average

# ---- F5: Seasonality ----
seasonality_enabled: true # 21-23 UTC boost from paper

# ---- Regime Detection ----
adx_length: 14
adx_trend_threshold: 25.0 # ADX > 25 = trending

# ════════════════════════════════════════════════════════════════
#  RISK MANAGEMENT
# ════════════════════════════════════════════════════════════════

# ---- ATR-Based Dynamic Stops ----
# SL and TP adapt to current volatility automatically
# In low vol: tighter stops. In high vol: wider stops.
atr_length: 14
atr_sl_multiplier: 2.0 # SL = 2 × daily ATR
atr_tp_multiplier: 3.0 # TP = 3 × daily ATR (1.5:1 reward/risk)
trailing_atr_activation: 1.5 # Trailing activates at 1.5 × ATR profit
trailing_atr_delta: 0.5 # Trails by 0.5 × ATR

# ---- Target-Volatility Position Sizing ----
# Scales position inversely with volatility:
#   Low vol  → bigger position (more capital at risk, less vol per dollar)
#   High vol → smaller position (less capital at risk, more vol per dollar)
# Result: approximately constant risk per trade regardless of market conditions
target_annual_vol: 0.25 # Target 25% annualized portfolio vol
max_position_scalar: 2.0 # Never more than 2x base amount

# ---- Signal Threshold ----
# Minimum composite score to enter a trade
# Higher = more selective, fewer trades, higher quality
# Lower = more trades, lower average quality
min_signal_threshold: 0.20

# ---- Volatility Pause ----
natr_pause_threshold: 5.0 # Pause when 4h NATR > 5%

# ---- Short Selling ----
# Off by default (spot). Enable for perpetual with leverage.
short_enabled: false
